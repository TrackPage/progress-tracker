'use strict';mix_d("P13NAmazonBusinessFrontEndCards__p13n-deal-info:p13n-deal-info__ZyFJEKmT","exports tslib @c/scoped-dom @c/aui-carousel @c/dom @c/remote-operations @p/A @p/a-carousel-framework @c/aui-modal @c/browser-operations @c/logger @c/aui-utils @c/aui-untrusted-ajax".split(" "),function(t,h,x,y,z,A,B,C,D,E,F,S,T){function d(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var g=d(x),G=d(y),H=d(A),n=d(B),I=d(C),J=d(D),u=d(E),q=d(F),L=function(a){return h.__awaiter(void 0,void 0,
void 0,function(){var b,c,k,e,f,l;return h.__generator(this,function(U){b=g["default"].cardRoot.querySelector(".modal-root");if(!b)return[2];c={a11yOpenMessage:"A modal for internal users to report problems with recommendations",hideHeader:!1};k=J["default"].create("report-flag-modal",".modal-root",c);e=u["default"].setup();f=g["default"].cardRoot.querySelector(".report-flag");e.define("show","click",function(){k.show()});e.attach("show",f);l=g["default"].cardRoot.querySelector(".trigger-hide");e.define("hide",
"click",function(){k.hide()});e.attach("hide",l);K(a);return[2]})})},K=function(a){var b=g["default"].cardRoot.querySelector(".report-flag"),c=u["default"].setup();c.define("showFlag","mouseover",function(){b.classList.remove("report-flag-hide")});c.define("hideFlag","mouseout",function(){b.classList.add("report-flag-hide")});c.attach("showFlag",a);c.attach("hideFlag",a)},v=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
w=/[^\/\-\[\]():\s]/,M=function(a){var b=n["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var c=parseInt(a.getAttribute("data-rows")||"2",10),k=function(){var b=a.innerHTML;a.innerHTML="&hellip;";var c=a.clientHeight;a.innerHTML=b;return c}();if(c){if(k){var e=function(a){b.innerHTML=a;return Math.round(b.clientHeight/k)<=c},f=function(c,f){c=c.split(f);var e=Math.floor(a.clientWidth/12),l=function(c){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";
b.textContent=c;a.appendChild(b);c=a.clientWidth>=a.scrollWidth;a.removeChild(b);return c},k=function(a){var b=a.length-e;a.trim().length>e&&!l(a)&&Array.prototype.slice.call(a).map(function(a,c){return c>e&&c<=b&&w.test(a)?"&shy;"+a:a});return a};return c.map(function(a){return k(a)}).join("")};return{truncate:function(){var c=a.innerHTML.trim(),k=a.textContent||"";c=f(c,v);a.appendChild(b);if(e(c))a.removeChild(b),a.innerHTML=c;else{var m=c.split(v);for(var h=1,d=m.length,g,n,p=0;h!==d;)if(g=Math.floor((d+
h)/2),n=m.slice(0,g).join("")+"&hellip;",e(n)){if(1>=d-g){for(p=g;0<p&&!w.test(m[p-1]);)p--;break}h=g}else d=g;m=0===p?void 0:m.slice(0,p).join("")+"&hellip;";m?(a.innerHTML=m,a.setAttribute("title",k)):(q["default"].log("Unable to successfully truncate line "+c,"ERROR"),a.removeChild(b))}}}}q["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else q["default"].log("Truncation element missing necessary line number data","ERROR")},N=function(a){a=a.getElementsByClassName("p13n-sc-truncate");
Array.prototype.slice.call(a).map(function(a){var b=M(a);b&&(b.truncate(),a.classList.add("p13n-sc-truncated"),a.classList.remove("p13n-sc-truncate"),a.className=a.className.replace(/p13n-sc-line-clamp-\d/g,""))})},O={initCarousel:function(a){return h.__awaiter(void 0,void 0,void 0,function(){var b,c,k,e,f,l,d;return h.__generator(this,function(m){switch(m.label){case 0:b=g["default"].cardRoot.classList.contains("p13n-sc-shoveler")?g["default"].cardRoot:g["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler")[0];
c=H["default"].setup(["getCarouselItems"]);if(!b)return[2];k=I["default"].getCarousel(z.unscope(b));e=G["default"].getCarousel(b);f=b.dataset||{};l=k.getAttr("name");d=function(){n["default"].loadDynamicImage("[data-name]='"+l+"' .p13n-sc-dynamic-image");N(b);null===a||void 0===a?void 0:a(b)};return[4,e.initialized];case 1:return m.sent(),L(b),n["default"].on("a:carousel:"+l+":change:pageSize",d),n["default"].on("a:carousel:"+l+":change:loading",d),n["default"].on("a:carousel:"+l+":change:animating",
d),n["default"].on("a:carousel:"+l+":change:fetchedItems",d),d(),e.attachRemoteOperation(function(a){var b=a.indexes;a=a.ids;return c.getCarouselItems(h.__assign(h.__assign({},f),{ids:a,indexes:b,offset:String(b[0]||0)}))}),[2]}})})}},P=function(a){return function(b){a.forEach(function(a){a(b)})}},r=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},Q=function(a){var b=a.querySelector('[class*="dealsCardDealTimer"]');if(null!==b){var c=b.dataset.endtime;c&&setInterval(function(){a:{var a=
parseInt(c,10);var e=Date.now();if(e<=a){var f=null;var d=a-e;e=Math.floor(d/36E5);a=Math.floor(d/6E4%60);d=Math.floor(d/1E3%60);if(24<=e&&b.dataset.dayscountdowntoendtemplate&&(f=b.dataset.dayscountdowntoendtemplate,null!==f)){f=f.replace("${daysCount}",Math.floor(e/24).toString());b.innerText=f;break a}b.dataset.minutescountdowntoendtemplate&&b.dataset.hourscountdowntoendtemplate&&(f=0===e?b.dataset.minutescountdowntoendtemplate:b.dataset.hourscountdowntoendtemplate);null!==f&&(f=f.replace("_hours_",
r(e)),f=f.replace("_minutes_",r(a)),f=f.replace("_seconds_",r(d)),b.innerText=f)}else b.dataset.expiredstring&&(b.innerText=b.dataset.expiredstring)}},1E3)}},R=function(){var a,b=g["default"].cardRoot.getElementsByClassName("a-carousel-card");try{for(var c=h.__values(b),d=c.next();!d.done;d=c.next())Q(d.value)}catch(f){var e={error:f}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(e)throw e.error;}}};t._operationNames=["getCarouselItems"];t.card=function(){return h.__awaiter(void 0,void 0,
void 0,function(){return h.__generator(this,function(a){switch(a.label){case 0:return[4,O.initCarousel(P([R]))];case 1:return a.sent(),[2]}})})}});
